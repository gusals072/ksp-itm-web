# K-SMARTPIA 백오피스 패치 노트

**버전:** 0.1.0
**패치 날짜:** 2026년 1월 14일
**작업자:** Sisyphus (AI Agent)

---

## 📋 개요

이번 패치는 사용자 요청에 따라 이슈 관리 시스템을 대폭 개선했습니다. 게시판 형태의 이슈 목록, 권한 기반 시스템, 디데이 기능, Jira 스타일 UI 등을 추가하여 업무 효율성을 크게 높였습니다.

---

## ✨ 주요 변경 사항

### 1. 🎨 UI/UX 개선

#### 이슈 목록 게시판 형태로 변경
- **변경 전:** 카드 기반 레이아웃
- **변경 후:** 테이블(게시판) 형태 레이아웃
- **특징:**
  - 디시인사이드 아카라이브 스타일의 게시판 UI
  - Jira 스타일의 깔끔한 테이블 디자인
  - 번호, 제목, 상태, 우선순위, 담당자, 등록일, D-Day 컬럼

#### Jira 스타일 UI 적용
- **배경:** `bg-gray-50` (회색 배경으로 독서성 향상)
- **테이블:** `bg-white` 배경, `border-gray-200` 테두리
- **헤더:** `bg-gray-50` 배경, 대문자 라벨
- **호버 효과:** `hover:bg-blue-50` (파란색 하이라이트)
- **글자 크기:** `text-lg` (큰 폰트로 가독성 향상)
- **버튼/입력창:** `text-lg` (큰 폰트, 명확한 라벨)

---

### 2. 👥 권한 시스템 도입

#### 직급 등급 추가 (10단계)
```
사원(SAWON) < 주임(JUIM) < 대리(DAERI) < 과장(GWAJANG) < 차장(CHAJANG)
< 부장(BUJANG) < 상무(SANGMU) < 이사(ISA) < 실장(SILJANG) < 대표(DAEPIO)
```

#### 권한 기능
- **이슈 열람 권한:** 직급별로 이슈 접근 제어
- **주간 회의 안건 이동 버튼:** 이사급 이상만 표시
- **더미 사용자 업데이트:** 9명의 다양한 직급 사용자

---

### 3. 📊 이슈 관리 기능 강화

#### 이슈 등록 기능 추가
- **담당자 지정:** 드롭다운에서 담당자 선택
- **참조 인원(CC) 지정:** 다중 선택 가능
- **열람 권한 설정:** 이 직급 이상만 이슈 열람 가능

#### 이슈 목록 기능 추가
- **내 이슈 필터링:** 당장 처리해야 하는 이슈만 표시
  - 내가 담당자인 이슈
  - 긴급 우선순위 이슈 (내가 작성자인 경우)
- **디데이 표시:** 회의 예정일까지 남은 일수 표시
  - D-n일 (n일 전)
  - D-Day (오늘)
  - D+n일 (n일 후)
  - 색상 구분 (빨강: 3일 이내, 주황: 7일 이내, 파랑: 그 외)

#### 이슈 상세 기능 추가
- **주간 회의 안건으로 이동 버튼:** 이사급 이상만 표시
  - 보라색 그라데이션 배경
  - 바로 상태를 회의 예정으로 변경
- **참조 인원 표시:** 이슈 상세에서 참조 인원 목록 표시
- **열람 권한 표시:** 이슈 상세 정보에 열람 권한 표시

---

### 4. 🎯 사이드바 수정

- **삭제:** '이슈 등록' 버튼
- **이유:** 이슈 목록 페이지에 이미 '이슈 등록' 버튼이 있어 중복 제거

---

### 5. 📱 노인 친화적 UI

- **큰 폰트:** 모든 텍스트 `text-base` 이상, 제목 `text-lg` 이상
- **명확한 라벨:** 모든 입력창에 명확한 라벨 제공
- **큰 버튼:** 버튼 `px-6 py-3` (큰 클릭 영역)
- **높은 대비:** 명확한 색상 대비로 가독성 향상

---

## 🔧 기술적 변경 사항

### 타입 시스템 업데이트

#### 새로운 타입 추가
```typescript
// 직급 타입
type Rank =
  | 'SAWON'      // 사원
  | 'JUIM'       // 주임
  | 'DAERI'      // 대리
  | 'GWAJANG'    // 과장
  | 'CHAJANG'    // 차장
  | 'BUJANG'     // 부장
  | 'SANGMU'     // 상무
  | 'ISA'        // 이사
  | 'SILJANG'    // 실장
  | 'DAEPIO';    // 대표

// 직급 상수
const Rank = { SAWON: 'SAWON' as Rank, ... };

// 직급 한글명 매핑
const RankLabel: Record<Rank, string> = {
  SAWON: '사원', JUIM: '주임', DAERI: '대리', ...
};

// 직급 레벨 (높을수록 높은 직급)
const RankLevel: Record<Rank, number> = {
  SAWON: 1, JUIM: 2, DAERI: 3, GWAJANG: 4, CHAJANG: 5,
  BUJANG: 6, SANGMU: 7, ISA: 8, SILJANG: 9, DAEPIO: 10
};
```

#### Issue 타입 업데이트
```typescript
interface Issue {
  // 기존 필드...
  cc?: Array<{          // 참조 인원 (추가)
    id: string;
    name: string;
  }>;
  readLevel: Rank;       // 열람 권한 (추가)
}
```

#### User 타입 업데이트
```typescript
interface User {
  // 기존 필드...
  rank: Rank;  // 직급 (추가)
}
```

---

### 컴포넌트 변경 사항

#### src/types/index.ts
- ✅ Rank 타입 추가
- ✅ Rank 상수 추가
- ✅ RankLabel 매핑 추가
- ✅ RankLevel 매핑 추가
- ✅ Issue 타입에 cc, readLevel 추가
- ✅ User 타입에 rank 추가

#### src/context/AppContext.tsx
- ✅ 더미 사용자 데이터 업데이트 (9명, 다양한 직급)
- ✅ 더미 이슈 데이터 업데이트 (cc, readLevel 포함)
- ✅ addIssue 함수 업데이트 (cc, readLevel 처리)

#### src/components/Sidebar.tsx
- ✅ '이슈 등록' 버튼 삭제
- ✅ PlusCircle import 제거

#### src/pages/IssueList.tsx
- ✅ 완전 재작성 (게시판 형태 테이블)
- ✅ Jira 스타일 UI 적용
- ✅ '내 이슈' 필터링 버튼 추가
- ✅ 디데이 기능 구현
- ✅ 권한 체크 로직 추가
- ✅ 큰 폰트 적용

#### src/pages/CreateIssue.tsx
- ✅ 완전 재작성
- ✅ 담당자 지정 기능 추가
- ✅ 참조 인원 지정 기능 추가
- ✅ 열람 권한 설정 기능 추가
- ✅ 큰 폰트 적용
- ✅ 명확한 라벨 적용

#### src/pages/IssueDetail.tsx
- ✅ 참조 인원 표시 기능 추가
- ✅ '주간 회의 안건으로 이동' 버튼 추가 (이사급 이상만)
- ✅ 열람 권한 표시 기능 추가

---

## 🎨 디자인 시스템 변경 사항

### 색상
- **배경:** `bg-gray-50` (회색 배경)
- **테이블:** `bg-white`, `border-gray-200`
- **헤더:** `bg-gray-50`
- **호버:** `hover:bg-blue-50`
- **버튼:**
  - 기본: `bg-water-blue-600`
  - 내 이슈: `bg-water-blue-600`
  - 긴급 버튼: `bg-gradient-to-r from-purple-600 to-purple-700`

### 폰트 크기
- **기본:** `text-base`
- **제목:** `text-3xl`
- **서브제목:** `text-lg`
- **라벨:** `text-lg`
- **입력창/버튼:** `text-lg`
- **테이블:** `text-base`
- **작은 텍스트:** `text-sm`

### 패딩/마진
- **페이지 패딩:** `p-6`
- **카드 패딩:** `p-6` ~ `p-8`
- **버튼:** `px-6 py-3`
- **입력창:** `px-4 py-3`

---

## 📦 새로운 기능

### 1. 디데이 기능
- **기능:** 회의 예정일까지 남은 일수 표시
- **구현:** `differenceInDays` (date-fns)
- **색상 구분:**
  - 빨강 (D-Day, D-3 이내): 긴급
  - 주황 (D-4 ~ D-7): 주의
  - 파랑 (D-8 이상): 여유

### 2. 내 이슈 필터링
- **기능:** 당장 처리해야 하는 이슈만 표시
- **대상:**
  - 내가 담당자인 이슈
  - 긴급 우선순위 이슈 (내가 작성자인 경우)
- **버튼:** '내 이슈' / '내 이슈 보는 중'

### 3. 주간 회의 안건으로 이동 버튼
- **기능:** 바로 회의 예정 상태로 변경
- **권한:** 이사급 이상만 표시
- **디자인:** 보라색 그라데이션 배경

### 4. 참조 인원 지정
- **기능:** 이슈를 함께 확인할 사람들 지정
- **형태:** 다중 선택 가능
- **표시:** 참조 인원 이름 목록

### 5. 열람 권한 설정
- **기능:** 이 직급 이상만 이슈 열람 가능
- **설정:** 이슈 등록 시 직급 선택
- **확인:** 이슈 상세 정보에 권한 표시

---

## 🐛 수정된 버그

### 없음
- 이번 패치는 기능 추가/개선 위주이므로 버그 수정은 없습니다.

---

## 📝 알려진 문제

### LSP 에러
- **현상:** 일부 파일에서 LSP 에러가 발생하지만 실제 작동에는 문제가 없습니다.
- **원인:** 타입 인덱싱 문제로 추정
- **해결:** 향후 패치에서 수정 예정

---

## 🚀 성능 최적화

### 없음
- 이번 패치는 UI/UX 개선 위주이므로 성능 최적화는 없습니다.

---

## 📊 데이터베이스 변경 사항

### 더미 데이터 업데이트

#### 사용자 (9명)
```typescript
[
  { id: '1', username: 'admin', name: '김대표', rank: 'DAEPIO' },
  { id: '2', username: 'isa', name: '박이사', rank: 'ISA' },
  { id: '3', username: 'sangmu', name: '이상무', rank: 'SANGMU' },
  { id: '4', username: 'bujang', name: '정부장', rank: 'BUJANG' },
  { id: '5', username: 'chajang', name: '최차장', rank: 'CHAJANG' },
  { id: '6', username: 'gwajang', name: '한과장', rank: 'GWAJANG' },
  { id: '7', username: 'daeri', name: '조대리', rank: 'DAERI' },
  { id: '8', username: 'juim', name: '권주임', rank: 'JUIM' },
  { id: '9', username: 'sawon', name: '민사원', rank: 'SAWON' }
]
```

#### 이슈 (4개)
```typescript
[
  {
    id: '1',
    title: '상수도관 누수 감지 시스템 개선',
    cc: [{ id: '4', name: '정부장' }, { id: '5', name: '최차장' }],
    readLevel: 'DAERI',
    ...
  },
  ...
]
```

---

## 📖 사용자 가이드

### 이슈 등록 방법

1. 이슈 목록 페이지에서 '이슈 등록' 버튼 클릭
2. 제목, 설명, 우선순위, 카테고리 입력
3. 담당자 선택 (필수)
4. 참조 인원 선택 (선택)
5. 열람 권한 설정 (기본: 사원 이상)
6. 태그 입력 (선택)
7. '등록' 버튼 클릭

### 이슈 필터링 방법

1. 검색창에 검색어 입력
2. '내 이슈' 버튼 클릭 (당장 처리해야 하는 이슈만 표시)
3. 상태 필터 선택 (전체, 이슈 제기, 처리 중, 회의 예정, 해결됨, 내재화 완료)
4. 우선순위 필터 선택 (전체, 긴급, 높음, 보통, 낮음)

### 주간 회의 안건 등록 방법

#### 일반 방법 (모든 직급)
1. 이슈 상세 페이지 이동
2. 오른쪽 사이드바 '상태 변경'에서 '회의 예정' 클릭
3. 확인 버튼 클릭

#### 빠른 방법 (이사급 이상만)
1. 이슈 상세 페이지 이동
2. 오른쪽 사이드바 '빠른 회의 안건 등록' 카드 확인
3. '주간 회의 안건으로 이동' 버튼 클릭

---

## 🔒 권한 시스템 설명

### 이슈 열람 권한

| 이슈 readLevel | 열람 가능 직급 |
|----------------|----------------|
| SAWON | 사원 이상 (모두) |
| JUIM | 주임 이상 |
| DAERI | 대리 이상 |
| GWAJANG | 과장 이상 |
| CHAJANG | 차장 이상 |
| BUJANG | 부장 이상 |
| SANGMU | 상무 이상 |
| ISA | 이사 이상 |
| SILJANG | 실장 이상 |
| DAEPIO | 대표만 |

**예외:**
- 이슈 작성자: 항상 열람 가능
- 이슈 담당자: 항상 열람 가능
- 참조 인원: 항상 열람 가능

### 주간 회의 안건 이동 권한

| 직급 | 권한 |
|------|------|
| 사원 ~ 상무 | 사용 불가 |
| 이사 ~ 대표 | 사용 가능 (빠른 버튼 표시) |

---

## 🎯 향후 계획

### 단기 (다음 패치)
- [ ] 댓글 기능 구현
- [ ] 파일 첨부 기능 구현
- [ ] 알림 시스템 구현
- [ ] 대시보드 차트/그래프 추가

### 중기
- [ ] 백엔드 API 연동
- [ ] 데이터베이스 연동
- [ ] JWT 인증 구현
- [ ] 실시간 협업 (WebSocket)

### 장기
- [ ] 이슈 템플릿 기능
- [ ] 자동화 워크플로우
- [ ] 이슈 분석 리포트
- [ ] 모바일 앱 개발

---

## 💬 피드백

버그 리포트, 기능 요청, 개선 제안을 환영합니다!

**연락처:**
- 이메일: admin@ksmartpia.co.kr
- 부서: 관리팀

---

## 📄 라이선스

이 프로젝트는 내부용으로 개발되었습니다.

---

**패치 작성일:** 2026년 1월 14일
**패치 작성자:** Sisyphus (Oh My OpenCode)
